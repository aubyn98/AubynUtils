"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});class o{constructor(e){this.storage=window[e.type],this.prefix=e.prefix,this.expire=e.expire||0}setItem(e,t,{expire:s=0,renewal:r=!1}={}){if((t===""||t===null||t===void 0)&&(t=null),isNaN(s)||s<0)throw new Error("Expire must be a number");s=(s||this.expire)*1e3;const i={value:t,time:Date.now(),expire:s,renewal:r};this.storage.setItem(e,JSON.stringify(i))}getItem(e,t=null){const s=this.storage;if(e=this.autoAddPrefix(e),s.getItem(e)===null)return t;const r=JSON.parse(s.getItem(e)),i=Date.now();return r.expire&&r.expire<i-r.time?(this.removeItem(e),t):(r.expire&&r.renewal&&this.setItem(this.autoRemovePrefix(e),r.value,r.expire/1e3),r.value)}setItem_simple(e,t){return this.storage.setItem(e,JSON.stringify(t))}getItem_simple(e,t){const s=this.storage.getItem(e);return s?JSON.parse(s):t}removeItem_simple(e){this.storage.removeItem(e)}removeItem(e){this.storage.removeItem(this.autoAddPrefix(e))}autoAddPrefix(e){return(this.prefix?this.prefix+"_":"")+e}autoRemovePrefix(e){const t=this.prefix?this.prefix.length+1:"";return e.substr(t)}}const n=new o({type:"localStorage"}),a=new o({type:"sessionStorage"});exports.Storage=o;exports.local=n;exports.session=a;
