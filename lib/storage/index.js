"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});class o{constructor(e){this.storage=window[e.type],this.prefix=e.prefix,this.expire=e.expire||0}setItem(e,t,{expire:r=0,renewal:s=!1}={}){if((t===""||t===null||t===void 0)&&(t=null),isNaN(r)||r<0)throw new Error("Expire must be a number");r=(r||this.expire)*1e3;const i={value:t,time:Date.now(),expire:r,renewal:s};this.storage.setItem(e,JSON.stringify(i))}getItem(e,t=null){const r=this.storage;if(e=this.autoAddPrefix(e),r.getItem(e)===null)return t;const s=JSON.parse(r.getItem(e)),i=Date.now();return s.expire&&s.expire<i-s.time?(this.removeItem(e),t):(s.expire&&s.renewal&&this.setItem(this.autoRemovePrefix(e),s.value,s.expire/1e3),s.value)}setItem_simple(e,t){return this.storage.setItem(e,JSON.stringify(t))}getItem_simple(e){const t=this.storage.getItem(e);return t?JSON.parse(t):defaultVal}removeItem_simple(e){this.storage.removeItem(e)}removeItem(e){this.storage.removeItem(this.autoAddPrefix(e))}autoAddPrefix(e){return(this.prefix?this.prefix+"_":"")+e}autoRemovePrefix(e){const t=this.prefix?this.prefix.length+1:"";return e.substr(t)}}const n=new o({type:"localStorage"}),a=new o({type:"sessionStorage"});exports.Storage=o;exports.local=n;exports.session=a;
